---
title: "MySQL 5.1.46 リリース"
tag: "MySQL 5.1"
date: 2010-04-24 12:00:00 +0900
---

<br>
　MySQL 5.1.46 がリリースされました。このバージョンは、MySQL 5.1 シリーズの最新バージョンです。<br>
<br>
　このバージョンの最大のウリはなんと言っても <br>
　　　これまで RC だった InnoDB Plugin が 1.0.7 GA となった<br>
　ことでしょう。<br>
<br>
　その他多くの修正が加えられています。　詳しくはチェンジログを参照ください。<br>
<br>
　ダウンロードはこちらから。<br>
　　http://dev.mysql.com/downloads/mysql/5.1.html<br>
<br>
------------<br>
　以下チェンジログ<br>
■InnoDB Plugin について：<br>
* InnoDB Plugin has been upgraded to version 1.0.7. This version<br>
  is considered of General Availability (GA) quality. The InnoDB<br>
  Plugin Change History<br>
  (http://www.innodb.com/doc/innodb_plugin-1.0/innodb-changes.ht<br>
  ml) may contain information in addition to those changes<br>
  reported here.<br>
  In this release, the InnoDB Plugin is included in source and<br>
  binary distributions, except RHEL3, RHEL4, SuSE 9 (x86,<br>
  x86_64, ia64), and generic Linux RPM packages. It also does<br>
  not work for FreeBSD 6 and HP-UX or for Linux on generic ia64.<br>
<br>
<br>
■機能の追加と変更：<br>
* There is a new system variable, skip_name_resolve, that is set<br>
  from the value of the --skip-name-resolve server option. This<br>
  provides a way to determine at runtime whether the server uses<br>
  name resolution for client connections.<br>
  (Bug#37168: http://bugs.mysql.com/bug.php?id=37168)<br>
<br>
<br>
■バグ修正：<br>
* Security Fix: Privilege checking for UNINSTALL PLUGIN was<br>
  incorrect. (Bug#51770: http://bugs.mysql.com/bug.php?id=51770)<br>
<br>
* Partitioning: Partition pruning on RANGE partitioned tables<br>
  did not always work correctly; the last partition was not<br>
  excluded if the range was beyond it (when not using MAXVALUE).<br>
  Now the last partition is not included if the partitioning<br>
  function value is not within the range.<br>
  (Bug#51830: http://bugs.mysql.com/bug.php?id=51830)<br>
<br>
* Partitioning: The insert_id server system variable was not<br>
  reset following an insert that failed on a partitioned MyISAM<br>
  table having an AUTO_INCREMENT column.<br>
  (Bug#50392: http://bugs.mysql.com/bug.php?id=50392)<br>
<br>
* Partitioning: Foreign keys are not supported on partitioned<br>
  tables. However, it was possible via an ALTER TABLE statement<br>
  to set a foreign key on a partitioned table; it was also<br>
  possible to partition a table with a single foreign key.<br>
  (Bug#50104: http://bugs.mysql.com/bug.php?id=50104)<br>
<br>
* Partitioning: GROUP BY queries performed poorly for some<br>
  partitioned tables. This was due to the block size not being<br>
  set for partitioned tables, thus the keys per block was not<br>
  correct, which could cause such queries to be optimized<br>
  incorrectly.<br>
  (Bug#48229: http://bugs.mysql.com/bug.php?id=48229)<br>
  See also Bug#37252: http://bugs.mysql.com/bug.php?id=37252.<br>
<br>
* Partitioning: REPAIR TABLE failed for partitioned ARCHIVE<br>
  tables. (Bug#46565: http://bugs.mysql.com/bug.php?id=46565)<br>
<br>
* Replication: TRUNCATE TABLE performed on a temporary table<br>
  using the InnoDB storage engine was logged even when using<br>
  row-based mode.<br>
  (Bug#51251: http://bugs.mysql.com/bug.php?id=51251)<br>
<br>
* Replication: When using temporary tables the binary log needs<br>
  to insert a pseudo-thread ID for threads that are using<br>
  temporary tables, each time a switch happens between two<br>
  threads, both of which are using temporary tables. However, if<br>
  a thread issued a failing statement before exit, its ID was<br>
  not recorded in the binary log, and this in turn caused the ID<br>
  for the next thread that tried to do something with a<br>
  temporary table not to be logged as well. Subsequent replays<br>
  of the binary log failed with the error Table ... doesn't<br>
  exist. (Bug#51226: http://bugs.mysql.com/bug.php?id=51226)<br>
<br>
* Replication: If the master was using sql_mode='TRADITIONAL',<br>
  duplicate key errors were not sent to the slave, which<br>
  received 0 rather than the expected error code. This caused<br>
  replication to fail even when such an error was expected.<br>
  (Bug#51055: http://bugs.mysql.com/bug.php?id=51055)<br>
<br>
* Replication: When run with the --database option, mysqlbinlog<br>
  printed ROLLBACK statements but did not print any<br>
  corresponding SAVEPOINT statements.<br>
  (Bug#50407: http://bugs.mysql.com/bug.php?id=50407)<br>
<br>
* Replication: CREATE EVENT statements were padded with<br>
  "garbage" characters when written to the binary log, which<br>
  caused a syntax error when trying to read back from the log.<br>
  (Bug#50095: http://bugs.mysql.com/bug.php?id=50095)<br>
<br>
* Replication: Column length information generated by InnoDB did<br>
  not match that generated by MyISAM, which caused invalid<br>
  metadata to be written to the binary log when trying to<br>
  replicate BIT columns.<br>
  (Bug#49618: http://bugs.mysql.com/bug.php?id=49618)<br>
<br>
* Replication: The value of Slave_IO_running in the output of<br>
  SHOW SLAVE STATUS did not distinguish between all 3 possible<br>
  states of the slave I/O thread (not running; running but not<br>
  connected; connected). Now the value Connecting (rather than<br>
  No) is shown when the slave I/O thread is running but the<br>
  slave is not connected to a replication master.<br>
  The server system variable Slave_running also reflects this<br>
  change, and is now consistent with what is shown for<br>
  Slave_IO_running.<br>
  (Bug#30703: http://bugs.mysql.com/bug.php?id=30703,<br>
  Bug#41613: http://bugs.mysql.com/bug.php?id=41613,<br>
  Bug#51089: http://bugs.mysql.com/bug.php?id=51089)<br>
<br>
* EXPLAIN EXTENDED crashed trying to resolve references to freed<br>
  temporary table columns for GROUP_CONCAT() ORDER BY arguments.<br>
  (Bug#52397: http://bugs.mysql.com/bug.php?id=52397)<br>
<br>
* For InnoDB Plugin, bit fields were causing problems with<br>
  concurrency on SMP systems because of word-packing issues.<br>
  (Bug#52360: http://bugs.mysql.com/bug.php?id=52360)<br>
<br>
* The optimizer could attempt to evaluate the WHERE clause<br>
  before any rows had been read, resulting in a server crash.<br>
  (Bug#52177: http://bugs.mysql.com/bug.php?id=52177)<br>
<br>
* For LDML-defined collations, some data structures were not<br>
  initialized properly to enable UPPER() and LOWER() to work<br>
  correctly. (Bug#51976: http://bugs.mysql.com/bug.php?id=51976)<br>
<br>
* On Windows, LOAD_FILE() could cause a crash for some<br>
  pathnames. (Bug#51893: http://bugs.mysql.com/bug.php?id=51893)<br>
<br>
* Invalid memory reads occurred for HANDLER ... READ NEXT after<br>
  a failed HANDLER ... READ FIRST.<br>
  (Bug#51877: http://bugs.mysql.com/bug.php?id=51877)<br>
<br>
* After TRUNCATE TABLE of a MyISAM table, subsequent queries<br>
  could crash the server if myisam_use_mmap was enabled.<br>
  (Bug#51868: http://bugs.mysql.com/bug.php?id=51868)<br>
<br>
* If myisam_sort_buffer_size was set to a small value, table<br>
  repair for MyISAM tables with FULLTEXT indexes could crash the<br>
  server. (Bug#51866: http://bugs.mysql.com/bug.php?id=51866)<br>
<br>
* In LOAD DATA INFILE, using a SET clause to set a column equal<br>
  to itself caused a server crash.<br>
  (Bug#51850: http://bugs.mysql.com/bug.php?id=51850)<br>
<br>
* A problem with equality propagation optimization for prepared<br>
  statements and stored procedures caused a server crash upon<br>
  re-execution of the prepared statement or stored procedure.<br>
  (Bug#51650: http://bugs.mysql.com/bug.php?id=51650)<br>
  See also Bug#8115: http://bugs.mysql.com/bug.php?id=8115,<br>
  Bug#8849: http://bugs.mysql.com/bug.php?id=8849.<br>
<br>
* The optimizer performed an incorrect join type when COALESCE()<br>
  appeared within an IN() operation.<br>
  (Bug#51598: http://bugs.mysql.com/bug.php?id=51598)<br>
<br>
* The server crashed when the optimizer attempted to determine<br>
  constant tables but a table storage engine did not support<br>
  exact record count.<br>
  (Bug#51494: http://bugs.mysql.com/bug.php?id=51494)<br>
<br>
* The server could crash populating the<br>
  INFORMATION_SCHEMA.PROCESSLIST table due to lack of mutex<br>
  protection.<br>
  (Bug#51377: http://bugs.mysql.com/bug.php?id=51377)<br>
<br>
* Use of HANDLER statements with tables that had spatial indexes<br>
  caused a server crash.<br>
  (Bug#51357: http://bugs.mysql.com/bug.php?id=51357)<br>
<br>
* With an XA transaction active, SET autocommit = 1 could cause<br>
  side effects such as memory corruption or a server crash.<br>
  (Bug#51342: http://bugs.mysql.com/bug.php?id=51342)<br>
<br>
* Following a bulk insert into a MyISAM table, if MyISAM failed<br>
  to build indexes using repair by sort, data file corruption<br>
  could occur.<br>
  (Bug#51307: http://bugs.mysql.com/bug.php?id=51307)<br>
<br>
* CHECKSUM TABLE could compute the checksum for BIT columns<br>
  incorrectly.<br>
  (Bug#51304: http://bugs.mysql.com/bug.php?id=51304)<br>
<br>
* A HAVING clause on a joined table in some cases failed to<br>
  eliminate rows which should have been excluded from the result<br>
  set. (Bug#51242: http://bugs.mysql.com/bug.php?id=51242)<br>
<br>
* The type inference used for view columns caused some columns<br>
  in views to be handled as the wrong type, as compared to the<br>
  same columns in base tables. DATE columns in base tables were<br>
  treated as TIME columns in views, and base table TIME columns<br>
  as view DATETIME columns.<br>
  (Bug#50918: http://bugs.mysql.com/bug.php?id=50918)<br>
<br>
* The YEAR values 2000 and 0000 could be treated as equal.<br>
  (Bug#49910: http://bugs.mysql.com/bug.php?id=49910)<br>
<br>
* Performing a single in-place ALTER TABLE containing ADD INDEX<br>
  and DROP INDEX options that used the same index name could<br>
  result in a corrupt table definition file. Now such ALTER<br>
  TABLE statements are no longer performed in place.<br>
  (Bug#49838: http://bugs.mysql.com/bug.php?id=49838)<br>
<br>
* mysql_upgrade did not detect when CSV log tables incorrectly<br>
  contained columns that could be NULL. Now these columns are<br>
  altered to be NOT NULL.<br>
  (Bug#49823: http://bugs.mysql.com/bug.php?id=49823)<br>
<br>
* If a stored function contained a RETURN statement with an ENUM<br>
  value in the ucs2 character set, SHOW CREATE FUNCTION and<br>
  SELECT DTD_IDENTIFIER FROM INFORMATION_SCHEMA.ROUTINES<br>
  returned incorrect values.<br>
  (Bug#48766: http://bugs.mysql.com/bug.php?id=48766)<br>
<br>
* The server crashed when it could not determine the best<br>
  execution plan for queries involving outer joins with<br>
  nondeterministic ON clauses such as the ones containing the<br>
  RAND() function, a user-defined function, or a NOT<br>
  DETERMINISTIC stored function.<br>
  (Bug#48483: http://bugs.mysql.com/bug.php?id=48483)<br>
<br>
* A query that read from a derived table (of the form SELECT ...<br>
  FROM (SELECT ...)) produced incorrect results when the<br>
  following conditions were present:<br>
<br>
     + The table subquery contained a derived query ((SELECT ...<br>
       ) AS column).<br>
<br>
     + The derived query could potentially produce zero rows or<br>
       a single NULL (that is, no rows matched, or the query<br>
       used an aggregate function such as SUM() running over<br>
       zero rows).<br>
<br>
     + The table subquery joined at least two tables.<br>
<br>
     + The join condition involved an index.<br>
  (Bug#47904: http://bugs.mysql.com/bug.php?id=47904)<br>
<br>
* The optimization to read MIN() or MAX() values from an index<br>
  did not properly handle comparisons with NULL values. This<br>
  could produce incorrect results for MIN() or MAX()when the<br>
  WHERE clause tested a NOT NULL column for NULL.<br>
  (Bug#47762: http://bugs.mysql.com/bug.php?id=47762)<br>
<br>
* Killing a query during the optimization phase of a subquery<br>
  could cause a server crash.<br>
  (Bug#47761: http://bugs.mysql.com/bug.php?id=47761)<br>
<br>
* The query shown by EXPLAIN EXTENDED plus SHOW WARNINGS could<br>
  produce results different from the original query.<br>
  (Bug#47669: http://bugs.mysql.com/bug.php?id=47669)<br>
<br>
* Renaming a column of an InnoDB table caused the server to go<br>
  out of sync with the InnoDB data dictionary.<br>
  (Bug#47621: http://bugs.mysql.com/bug.php?id=47621)<br>
<br>
* MyISAM could write uninitialized data to new index pages. Now<br>
  zeros are written to unused bytes in the pages.<br>
  (Bug#47598: http://bugs.mysql.com/bug.php?id=47598)<br>
<br>
* Setting myisam_repair_threads larger than 1 could result in<br>
  the cardinality for all indexes of a MyISAM table being set to<br>
  1 after parallel index repair.<br>
  (Bug#47444: http://bugs.mysql.com/bug.php?id=47444)<br>
<br>
* In debug builds, if the listed columns in the view definition<br>
  of the table used in an INSERT ... SELECT statement<br>
  mismatched, an assertion was raised in the query cache<br>
  invalidation code following the failing statement.<br>
  (Bug#46615: http://bugs.mysql.com/bug.php?id=46615)<br>
<br>
* For a query that selected from a view and used an alias for<br>
  the view, the metadata used the alias name rather than the<br>
  view name in the MYSQL_FIELD.table member.<br>
  (Bug#41788: http://bugs.mysql.com/bug.php?id=41788)<br>
<br>
* mysql_upgrade did not create temporary files properly.<br>
  (Bug#41057: http://bugs.mysql.com/bug.php?id=41057)<br>
<br>
* It was possible for DROP TABLE of one MyISAM table to remove<br>
  the data and index files of a different MyISAM table.<br>
  (Bug#40980: http://bugs.mysql.com/bug.php?id=40980)<br>
<br>
* If the arguments to a CONCAT() call included a local routine<br>
  variable, selecting the return value into a user variable<br>
  could produce an incorrect result.<br>
  (Bug#40625: http://bugs.mysql.com/bug.php?id=40625)<br>
<br>
* SHOW CREATE VIEW returned invalid SQL if the definition<br>
  contained a SELECT 'string' statement where the string was<br>
  longer than the maximum length of a column name, due to the<br>
  fact that this text was also used as an alias (in the AS<br>
  clause).<br>
  Because not all names retrieved from arbitrary SELECT<br>
  statements can be used as view column names due to length and<br>
  format restrictions, the server now checks the conformity of<br>
  automatically generated column names and rewrites according to<br>
  a predefined format any names that are not acceptable as view<br>
  column names before storing the final view definition on disk.<br>
  In such cases, the name is now rewritten as Name_exp_pos,<br>
  where pos is the position of the column. To avoid this<br>
  conversion scheme, define explicit, valid names for view<br>
  columns using the column_list clause of the CREATE VIEW<br>
  statement.<br>
  As part of this fix, aliases are now generated only for<br>
  top-level statements.<br>
  (Bug#40277: http://bugs.mysql.com/bug.php?id=40277)<br>
<br>
* While looking for the shortest index for a covering index<br>
  scan, the optimizer ignored that a clustered primary key read<br>
  the entire table.<br>
  (Bug#39653: http://bugs.mysql.com/bug.php?id=39653)<br>
<br>
* mysqlbinlog had a memory leak in its option-processing code.<br>
  (Bug#38468: http://bugs.mysql.com/bug.php?id=38468)<br>
<br>
* The test for readline during configuration failed when trying<br>
  to build MySQL in a directory other than the source tree root.<br>
  (Bug#35250: http://bugs.mysql.com/bug.php?id=35250)<br>
<br>
<br>
